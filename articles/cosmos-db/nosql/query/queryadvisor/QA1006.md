---
title: QA1006 - UPPER or LOWER
titleSuffix: Azure Cosmos DB for NoSQL
description: The query uses UPPER or LOWER in a string comparison in the WHERE clause, which doesn't use the index and may consume significant RUs.
author: jcodella
ms.author: jacodel
ms.service: azure-cosmos-db
ms.subservice: nosql
ms.topic: reference
ms.devlang: nosql
ms.date: 11/04/2025
---

# QA1006: UPPER or LOWER in String Comparison

| Property      | Value            |
|---------------|------------------|
| RuleID        | QA1006           |
| Title         | UpperLowerComparison |
| Category      | Performance      |

## Cause
The query uses `UPPER` or `LOWER` in a string comparison in the WHERE clause.

## Rule Description
`UPPER` and `LOWER` are deterministic functions, but don't use the index. If you plan to do frequent case insensitive comparisons, these functions may consume a significant number of RUs. 

## Recommendation
Define a computed property for the uppercase or lowercase property and define an index on the computed property. 

For more information on computed properties, please see [Computed properties](../computed-properties.md?tabs=dotnet).

## Example
Original query:

```sql
SELECT * 
FROM c 
WHERE LOWER(c.name) = "abc"
```

Create a compute property on `LOWER(c.name)`
```sql
{ 
  "computedProperties": [ 
	{ 
		"name": "cp_lowerName", 
		"query": "SELECT VALUE LOWER(c.name) FROM c" 
	} 
  ] 
}
```

Index `cp_lowerName` and the use the following updated query:

```sql
SELECT * 
FROM c 
WHERE cp_lowerName = "abc"
```