---
title: QA1004 - EndsWith
titleSuffix: Azure Cosmos DB for NoSQL
description: The query uses ENDSWITH, which is less efficient than prefix-based matching and requires a full index scan.
author: jcodella
ms.author: jacodel
ms.service: azure-cosmos-db
ms.subservice: nosql
ms.topic: reference
ms.devlang: nosql
ms.date: 11/04/2025
---

# QA1004: EndsWith

| Property      | Value            |
|---------------|------------------|
| RuleID        | QA1004           |
| Title         | EndsWith         |
| Category      | Performance      |

## Cause
The query uses `ENDSWITH`.

## Rule Description
`ENDSWITH` is less efficient than prefix-based matching. `ENDSWITH` requires using a full index scan, which can be more costly than functions like `STARTSWITH`, which performs a precise index scan. To understand the difference between the different type of index scan, see  [Overview of Indexing](../../../index-overview.md).

## Recommendation
If the comparison logic allows, create and index a computed property that reverses the string and use STARTSWITH for comparison. 

For more information on computed properties, please see [Computed properties - Azure Cosmos DB for NoSQL | Microsoft Learn](../computed-properties.md).

## Example
Original query:

```sql
SELECT * 
FROM c 
WHERE ENDSWITH(c.name, "xyz")
```

To improve this query, first create and index a computed property that reverse the property:

```sql
{ 
  "computedProperties": [ 
	{ 
		"name": "cp_reverseName", 
		"query": "SELECT VALUE REVERSE(c.name) FROM c" 
	} 
  ] 
}
```

Then use the following updated query:
```sql
SELECT * 
FROM c 
WHERE STARTSWITH(cp_reverseName, "xyz")
```