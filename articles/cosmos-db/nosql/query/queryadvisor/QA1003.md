---
title: QA1003 - Case Insensitivity
titleSuffix: Azure Cosmos DB for NoSQL
description: The query uses case-insensitive STARTSWITH or StringEquals, which can be costly compared to case-sensitive operations.
author: jcodella
ms.author: jacodel
ms.service: azure-cosmos-db
ms.subservice: nosql
ms.topic: reference
ms.devlang: nosql
ms.date: 11/04/2025
---

# QA1003: Case insensitive StartsWith or StringEquals string comparison

| Property      | Value            |
|---------------|------------------|
| RuleID        | QA1003           |
| Title         | CaseInsensitiveStartsWithOrStringEquals |
| Category      | Performance      |

## Cause
The query uses case-insensitive `STARTSWITH` or `StringEquals`.

## Rule description
Case-insensitive string searches can be costly. For example, case-sensitive `STARTSWITH` uses a precise index scan, but case-insensitive `STARTSWITH` uses an [expanded index scan]([Overview of Indexing](../../../index-overview.md#expanded-index-scan)). 

## Recommendation
Define and index a computed property that converts the string to lowercase (or upper case) and use case-sensitive comparison against the computed property.

## Example
Original query:

```sql
SELECT *  
FROM c  
WHERE StringEquals(c.name, “abc”, true)
```

Create a compute property on `c.name`
```sql
{ 
  "computedProperties": [ 
	{ 
		"name": "cp_lowerName", 
		"query": "SELECT VALUE LOWER(c.name) FROM c" 
	} 
  ] 
}
```

Index `cp_lowerName` and the use the following updated query:

```sql
SELECT * 
FROM c 
WHERE StringEquals(c.name, “abc”, false)
```