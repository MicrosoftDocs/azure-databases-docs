<svg viewBox="0 0 1280 720" width="1280" height="720" xmlns="http://www.w3.org/2000/svg">
  <style>
    path {
      stroke: #000000;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead);
    }
    rect {
      fill: #FFFFFF;
      stroke: #000000;
      stroke-width: 2;
    }
    rect.background {
      fill: #FFFFFF;
      stroke: none;
    }
    rect.highlight {
      fill: #2A446F;
    }
    text {
      font-family: 'Segoe UI', sans-serif;
      font-size: 13px;
      font-weight: 400;
      fill: #000000;
    }
    text.size-lg {
      font-size: 19px;
    }
    text.weight-bold {
      font-weight: 600;
    }
    text.align-center {
      text-anchor: middle;
    }
    text.color-inverse {
      fill: #FFFFFF;
    }
  </style>

  <!-- Background -->
  <rect width="1280" height="720" class="background"/>
  
  <!-- Title -->
  <text x="640" y="40" class="size-lg weight-bold align-center">Real-time Content Personalization Architecture</text>
  
  <!-- User Interfaces Section -->
  <text x="56" y="116" class="size-lg weight-bold">User Interfaces</text>
  
  <!-- Mobile Apps -->
  <rect x="50" y="140" width="140" height="80" rx="10"/>
  <text x="120" y="165" class="align-center">Mobile Apps</text>
  <text x="120" y="185" class="align-center">iOS and Android</text>
  
  <!-- Web Platform -->
  <rect x="50" y="240" width="140" height="80" rx="10"/>
  <text x="120" y="265" class="align-center">Web Platform</text>
  <text x="120" y="285" class="align-center">Progressive Web App</text>
  
  <!-- Smart TV Apps -->
  <rect x="50" y="340" width="140" height="80" rx="10"/>
  <text x="120" y="365" class="align-center">Smart TV Apps</text>
  <text x="120" y="385" class="align-center">Connected Devices</text>
  
  <!-- Streaming Devices -->
  <rect x="50" y="440" width="140" height="80" rx="10"/>
  <text x="120" y="465" class="align-center">Streaming Devices</text>
  <text x="120" y="485" class="align-center">Set-top Boxes</text>
  
  <!-- Event Processing Section -->
  <text x="307" y="116" class="size-lg weight-bold">Event Processing</text>
  
  <!-- Azure Functions -->
  <rect x="280" y="200" width="200" height="120" rx="10"/>
  <text x="380" y="230" class="weight-bold align-center">Azure Functions</text>
  <text x="380" y="260" class="align-center">• User Activity Processing</text>
  <text x="380" y="280" class="align-center">• Real-time Updates</text>
  <text x="380" y="300" class="align-center">• Content Triggers</text>
  
  <!-- Profile Storage Section -->
  <text x="557" y="116" class="size-lg weight-bold">User Profile Storage</text>
  
  <!-- Azure DocumentDB -->
  <rect x="540" y="140" width="200" height="120" rx="10" class="highlight"/>
  <text x="640" y="170" class="weight-bold align-center color-inverse">Azure DocumentDB</text>
  <text x="640" y="200" class="align-center color-inverse">• User Profiles</text>
  <text x="640" y="220" class="align-center color-inverse">• Content Preferences</text>
  <text x="640" y="240" class="align-center color-inverse">• Viewing History</text>

  <!-- AI and ML Section -->
  <text x="812" y="116" class="size-lg weight-bold">AI and Machine Learning</text>
  
  <!-- Azure Cognitive Services -->
  <rect x="820" y="140" width="200" height="120" rx="10"/>
  <text x="920" y="170" class="weight-bold align-center">Azure Cognitive Services</text>
  <text x="920" y="200" class="align-center">• Recommendation Engine</text>
  <text x="920" y="220" class="align-center">• Content Classification</text>
  <text x="920" y="240" class="align-center">• Personalization ML</text>
  
  <!-- Content Delivery Section -->
  <text x="624" y="498" class="size-lg weight-bold">Content Delivery</text>
  
  <!-- Azure CDN -->
  <rect x="470" y="360" width="140" height="100" rx="10"/>
  <text x="540" y="390" class="align-center">Azure CDN</text>
  <text x="540" y="410" class="align-center">Global Distribution</text>
  <text x="540" y="430" class="align-center">Edge Caching</text>
  
  <!-- Media Services -->
  <rect x="630" y="360" width="140" height="100" rx="10"/>
  <text x="700" y="390" class="align-center">Azure Media</text>
  <text x="700" y="410" class="align-center">Services</text>
  <text x="700" y="430" class="align-center">Streaming</text>
  
  <!-- Content Management -->
  <rect x="790" y="360" width="140" height="100" rx="10"/>
  <text x="860" y="390" class="align-center">Content</text>
  <text x="860" y="410" class="align-center">Management</text>
  <text x="860" y="430" class="align-center">System</text>
  
  <!-- Analytics Section -->
  <text x="335" y="560" class="size-lg weight-bold">Analytics and Insights</text>
  
  <!-- A/B Testing -->
  <rect x="400" y="420" width="130" height="100" rx="10"/>
  <text x="465" y="450" class="align-center">A/B Testing</text>
  <text x="465" y="470" class="align-center">and Experiments</text>
  <text x="465" y="490" class="align-center">Optimization</text>
  
  <!-- Ad System Section -->
  <text x="1046" y="568" class="size-lg weight-bold">Advertising</text>
  
  <!-- Ad Targeting -->
  <rect x="1030" y="360" width="140" height="80" rx="10"/>
  <text x="1100" y="385" class="align-center">Targeted</text>
  <text x="1100" y="405" class="align-center">Advertising</text>
  
  <!-- Ad Analytics -->
  <rect x="1030" y="460" width="140" height="80" rx="10"/>
  <text x="1100" y="485" class="align-center">Ad Analytics</text>
  <text x="1100" y="505" class="align-center">and Metrics</text>
  
  <!-- External Integrations Section -->
  <text x="124" y="702" class="size-lg weight-bold">External Systems</text>
  
  <!-- Social Media APIs -->
  <rect x="50" y="600" width="140" height="80" rx="10"/>
  <text x="120" y="625" class="align-center">Social Media</text>
  <text x="120" y="645" class="align-center">APIs</text>
  
  <!-- Third-party Content -->
  <rect x="210" y="600" width="140" height="80" rx="10"/>
  <text x="280" y="625" class="align-center">Third-party</text>
  <text x="280" y="645" class="align-center">Content Providers</text>
  
  <!-- External Systems to Functions -->
  <path d="M 190 640 L 320 320"/>
  <path d="M 280 600 L 380 320"/>
    
  <!-- Real-time Analytics -->
  <rect x="250" y="420" width="130" height="100" rx="10"/>
  <text x="315" y="450" class="align-center">Real-time</text>
  <text x="315" y="470" class="align-center">Analytics</text>
  <text x="315" y="490" class="align-center">Engagement</text>

  <!-- Arrows -->
  <!-- User Interfaces to Functions -->
  <path d="M 190 180 L 280 230"/>
  <path d="M 190 280 L 280 260"/>
  <path d="M 190 380 L 280 290"/>
  <path d="M 190 480 L 320 320"/>
  
  <!-- Functions to DocumentDB -->
  <path d="M 480 260 L 540 210"/>
  
  <!-- DocumentDB to Cognitive Services -->
  <path d="M 740 200 L 820 200"/>
  
  <!-- Cognitive Services to Content Delivery -->
  <path d="M 900 260 L 700 360"/>
  
  <!-- DocumentDB to Content Delivery -->
  <path d="M 639.3 260.3 L 540 360"/>
  <path d="M 639.3 260.5 L 700 360"/>
  <path d="M 639 260.3 L 860 360"/>
  
  <!-- Functions to Analytics -->
  <path d="M 350 320 L 315 420"/>
  <path d="M 400 320 L 465 420"/>
  
  <!-- Cognitive Services to Advertising -->
  <path d="M 1020 220 L 1100 360"/>
  
  <!-- Data flow labels -->
  <text x="1100" y="286" class="align-center">Ad Targeting</text>
  <!--Arrow marker definition-->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0,0 10,3.5 0,7"/>
    </marker>
</defs>
</svg>