<svg viewBox="0 0 1280 720" width="1280" height="720" xmlns="http://www.w3.org/2000/svg">
  <style>
    path {
      stroke: #000000;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead);
    }
    rect {
      fill: #FFFFFF;
      stroke: #000000;
      stroke-width: 2;
    }
    rect.background {
      fill: #FFFFFF;
      stroke: none;
    }
    rect.highlight {
      fill: #2A446F;
    }
    text {
      font-family: 'Segoe UI', sans-serif;
      font-size: 13px;
      font-weight: 400;
      fill: #000000;
    }
    text.size-lg {
      font-size: 19px;
    }
    text.weight-bold {
      font-weight: 600;
    }
    text.align-center {
      text-anchor: middle;
    }
    text.color-inverse {
      fill: #FFFFFF;
    }
  </style>
  <!-- Background -->
  <rect x="0" y="-1" width="1280" height="720" class="background"/>
  
  <!-- Title -->
  <text x="640" y="40" class="size-lg weight-bold align-center">Personalized Shopping Experience Architecture</text>
  
  <!-- Customer Touchpoints Section -->
  <text x="21" y="116" class="size-lg weight-bold">Customer Touchpoints</text>
  
  <!-- Mobile App -->
  <rect x="50" y="140" width="140" height="80" rx="10"/>
  <text x="120" y="165" class="align-center">Mobile Shopping</text>
  <text x="120" y="185" class="align-center">App</text>
  
  <!-- E-commerce Website -->
  <rect x="50" y="240" width="140" height="80" rx="10"/>
  <text x="120" y="265" class="align-center">E-commerce</text>
  <text x="120" y="285" class="align-center">Website</text>
  
  <!-- Physical Stores -->
  <rect x="50" y="340" width="140" height="80" rx="10"/>
  <text x="120" y="365" class="align-center">Physical Stores</text>
  <text x="120" y="385" class="align-center">Kiosks and Beacons</text>
  
  <!-- Social Commerce -->
  <rect x="50" y="440" width="140" height="80" rx="10"/>
  <text x="120" y="465" class="align-center">Social Commerce</text>
  <text x="120" y="485" class="align-center">Platforms</text>
  
  <!-- Real-time Processing Section -->
  <text x="295" y="116" class="size-lg weight-bold">Real-time Processing</text>
  
  <!-- Azure Functions -->
  <rect x="280" y="200" width="200" height="120" rx="10"/>
  <text x="380" y="230" class="weight-bold align-center">Azure Functions</text>
  <text x="380" y="260" class="align-center">• Event Processing</text>
  <text x="380" y="280" class="align-center">• Profile Updates</text>
  <text x="380" y="300" class="align-center">• Real-time Triggers</text>
  
  <!-- Customer Data Platform Section -->
  <text x="535" y="116" class="size-lg weight-bold">Customer Data Platform</text>
  
  <!-- Azure DocumentDB -->
  <rect x="540" y="140" width="200" height="120" rx="10" class="highlight"/>
  <text x="640" y="170" class="weight-bold align-center color-inverse">Azure DocumentDB</text>
  <text x="640" y="200" class="align-center color-inverse">• Customer Profiles</text>
  <text x="640" y="220" class="align-center color-inverse">• Purchase History</text>
  <text x="640" y="240" class="align-center color-inverse">• Preferences</text>
  
  <!-- AI and ML Section -->
  <text x="812" y="116" class="size-lg weight-bold">AI and Machine Learning</text>
  
  <!-- Azure Cognitive Services -->
  <rect x="820" y="140" width="200" height="120" rx="10"/>
  <text x="920" y="170" class="weight-bold align-center">Azure Cognitive Services</text>
  <text x="920" y="200" class="align-center">• Recommendation Engine</text>
  <text x="920" y="220" class="align-center">• Product Matching</text>
  <text x="920" y="240" class="align-center">• Sentiment Analysis</text>
  
  <!-- Personalization Services Section -->
  <text x="677" y="487" class="size-lg weight-bold">Personalization Services</text>
  
  <!-- Product Recommendations -->
  <!--Dynamic Pricing-->
  <rect x="630" y="360" width="140" height="100" rx="10"/>
  <text x="700" y="390" class="align-center">Dynamic Pricing</text>
  <text x="700" y="410" class="align-center">and Promotions</text>
  <text x="700" y="430" class="align-center">Engine</text>
  <!--Loyalty Programs-->
  <rect x="790" y="360" width="140" height="100" rx="10"/>
  <text x="860" y="390" class="align-center">Loyalty Programs</text>
  <text x="860" y="410" class="align-center">and Rewards</text>
  <text x="860" y="430" class="align-center">Management</text>
  <!--Marketing Automation Section-->
  <text x="1005" y="567" class="size-lg weight-bold">Marketing</text>
  <!--Email Marketing-->
  <rect x="980" y="360" width="140" height="80" rx="10"/>
  <text x="1050" y="385" class="align-center">Email Marketing</text>
  <text x="1050" y="405" class="align-center">Campaigns</text>
  <!--Push Notifications-->
  <rect x="980" y="460" width="140" height="80" rx="10"/>
  <text x="1050" y="485" class="align-center">Push Notifications</text>
  <text x="1050" y="505" class="align-center">and SMS</text>
  
  <!--Analytics Section-->
  <text x="281" y="559" class="size-lg weight-bold">Analytics and Insights</text>
  <!--Customer Analytics-->
  <rect x="250" y="420" width="130" height="100" rx="10"/>
  <text x="315" y="450" class="align-center">Customer</text>
  <text x="315" y="470" class="align-center">Journey</text>
  <text x="315" y="490" class="align-center">Analytics</text>
  <!--A/B Testing-->
  <rect x="400" y="420" width="130" height="100" rx="10"/>
  <text x="465" y="450" class="align-center">A/B Testing</text>
  <text x="465" y="470" class="align-center">and Optimization</text>
  
  <!--Integration Section-->
  <!--Payment Gateways-->
  <!--Social Media-->
  <!--Review Platforms-->
  
  <!--Search Platform Section-->
  <text x="543" y="666" class="size-lg weight-bold">Search and Discovery</text>
  <!--Intelligent Search-->
  <rect x="544" y="539" width="200" height="100" rx="10"/>
  <text x="644" y="569" class="align-center">Intelligent Search</text>
  <text x="644" y="589" class="align-center">• AI-powered Search</text>
  <text x="644" y="609" class="align-center">• Visual Search</text>
  <!--Arrows-->
  <!--Customer Touchpoints to Functions-->
  <path d="M 190 180 L 280 230"/>
  <path d="M 190 280 L 280 260"/>
  <path d="M 190 380 L 280 290"/>
  <path d="M 190 480 L 320 320"/>
  <!--Functions to DocumentDB-->
  <path d="M 480 260 L 540 210"/>
  <!--DocumentDB to Cognitive Services-->
  <path d="M 740 200 L 820 200"/>
  <!--DocumentDB to Personalization Services-->
  <path d="M 638.5 260 L 700 360"/>
  <path d="M 638 260.3 L 860 360"/>
  <!--Cognitive Services to Personalization-->
  <path d="M 900 260 L 700 360"/>
  <path d="M 920 260 L 860 360"/>
  <!--Personalization to Marketing-->
  <path d="M 930 400 L 980 400"/>
  <path d="M 930 430 L 980 500"/>
  <!--Functions to Analytics-->
  <path d="M 350 320 L 315 420"/>
  <path d="M 400 320 L 465 420"/>
  <!--DocumentDB to Search-->
  <path transform="matrix(0.9,0.4,-0.4,0.9,227.2,-230.7)" d="M 504.2 323.6 L 659.8 558.9"/>
  <!--External Integrations to Functions-->
  <!--Data flow labels-->
  <text x="714" y="290">Recommendations</text>
  <text x="350" y="380">Analytics</text>
  <!--Arrow marker definition-->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon fill="black" points="0,0 10,3.5 0,7"/>
    </marker>
  </defs>
</svg>